this.Mura=this.Mura||{},this.Mura.templates=this.Mura.templates||{},this.Mura.templates["cta-container"]=window.mura.Handlebars.template({compiler:[7,">= 4.0.0"],main:function(t,e,s,a,i){var n,o=null!=e?e:t.nullContext||{},c=s.helperMissing,r=t.escapeExpression;return'<div class="mura-cta__container"\n\tdata-mura-cta-anchorx="'+r("function"==typeof(n=null!=(n=s.anchorx||(null!=e?e.anchorx:e))?n:c)?n.call(o,{name:"anchorx",hash:{},data:i}):n)+'"\n\tdata-mura-cta-anchory="'+r("function"==typeof(n=null!=(n=s.anchory||(null!=e?e.anchory:e))?n:c)?n.call(o,{name:"anchory",hash:{},data:i}):n)+'">\n</div>\n'},useData:!0}),this.Mura.templates["cta-instance"]=window.mura.Handlebars.template({compiler:[7,">= 4.0.0"],main:function(t,e,s,a,i){var n,o=null!=e?e:t.nullContext||{},c=s.helperMissing,r="function",l=t.escapeExpression;return'<div id="mura-cta-'+l(typeof(n=null!=(n=s.instanceid||(null!=e?e.instanceid:e))?n:c)===r?n.call(o,{name:"instanceid",hash:{},data:i}):n)+'" class="mura-cta__item"\n\tdata-mura-cta-animate="'+l(typeof(n=null!=(n=s.animate||(null!=e?e.animate:e))?n:c)===r?n.call(o,{name:"animate",hash:{},data:i}):n)+'"\n\tdata-mura-cta-animatespeed="'+l(typeof(n=null!=(n=s.animatespeed||(null!=e?e.animatespeed:e))?n:c)===r?n.call(o,{name:"animatespeed",hash:{},data:i}):n)+'"\n\tdata-mura-cta-type="'+l(typeof(n=null!=(n=s.type||(null!=e?e.type:e))?n:c)===r?n.call(o,{name:"type",hash:{},data:i}):n)+'"\n>\n\t<div class="mura-cta__item__wrapper"\n\t\tdata-mura-cta-size="'+l(typeof(n=null!=(n=s.width||(null!=e?e.width:e))?n:c)===r?n.call(o,{name:"width",hash:{},data:i}):n)+'">\n\t\t<div class="mura-cta__item__content"></div>\n\t\t<div class="mura-cta__item__dismiss"></div>\n\t</div>\n</div>\n'},useData:!0}),this.Mura.templates.cta=window.mura.Handlebars.template({compiler:[7,">= 4.0.0"],main:function(t,e,s,a,i){return'<div class="mura-cta">\n</div>\n'},useData:!0}),Mura.DisplayObject.Cta=Mura.UI.extend({displayed:!1,delaymet:!0,stats:{visits:0,displays:0,dismissed:0},preview:!1,render:function(){this.context.scroll=parseInt(this.context.scroll)||0,this.context.delay=parseInt(this.context.delay)||0,this.context.displays=parseInt(this.context.displays)||0,this.context.visits=parseInt(this.context.visits)||0,this.context.resetinterval=this.context.resetinterval||"session",this.context.resetqty=parseInt(this.context.resetqty)||1,this.context.type=this.context.type||"drawer",this.context.animatespeed=this.context.animatespeed||"fast",this.context.anchorx=this.context.anchorx||"center",this.context.anchory=this.context.anchory||"center",this.context.animate=this.context.animate||"",this.context.animatespeed=this.context.animatespeed||"fast",this.context.width=this.context.width||"md",this.context.instanceclass=this.context.instanceclass||"",this.context.eventLabel=this.context.type,this.context.statsid=this.context.statsid||this.context.instanceid||Mura.createUUID(),"modal"==this.context.type?(this.context.anchorx="center",this.context.anchory="center",this.context.animate||(this.context.animate="ttb")):"bar"==this.context.type?(this.context.anchorx="center",this.context.anchory="bottom",this.context.animate="btt"):"drawer"==this.context.type?("center"==this.context.anchorx&&(this.context.anchorx="right"),"right"==this.context.anchorx?this.context.animate="rtl":(this.context.anchorx="left",this.context.animate="ltr"),this.context.eventLabel=this.context.eventLabel+" ("+this.context.anchorx+")"):"inline"==this.context.type&&(this.context.width="full",this.context.animate="",this.context.animatespeed=""),Mura.isNumeric(this.context.scroll)||(this.context.scroll=0),Mura.isNumeric(this.context.delay)||(this.context.delay=0),Mura.isNumeric(this.context.displays)||(this.context.displays=0),Mura.isNumeric(this.context.visits)||(this.context.visits=0),Mura.isNumeric(this.context.resetqty)||(this.context.resetqty=1),void 0===this.context.dismissible&&(this.context.dismissible=0),this.context.eventLabel=this.context.type;var t=Mura(this.context.targetEl).closest(".mura-region-local");t.length&&t.data("perm")&&(Mura(this.context.targetEl).html('<div class="mura-cta-empty" data-mura-cta-type-label="'+Mura.escape(this.context.type)+'"></div>'),this.mode="editable"),this.context.preview&&(this.preview=!0,Mura(this.context.targetEl).closest(".mura-object").data("preview","")),this.initStats(),this.recordVisit(),"inline"==this.context.type||Mura(".mura-cta").length||Mura("body").append(Mura.templates.cta());var e=Mura("#mura-cta-"+this.context.instanceid);e.length&&e.find(".mura-cta__item__dismiss").trigger("click");var s=this;Mura.loader().load(Mura.corepath+"/modules/v1/cta/css/mura-cta-config.css",function(){s.context.delay&&(s.delaymet=!1,setTimeout(function(){s.delaymet=!0,s.checkRequirements()},1e3*s.context.delay)),Mura(window).on("scroll",function(){s.checkRequirements()}),s.checkRequirements()})},addTime:function(t,e,s){return e&&"session"!=e||(e="day"),s=s||1,"minute"==e?new Date(t.getTime()+6e4*s):"hour"==e?new Date(t.getTime()+60*s*6e4):"day"==e?new Date(t.getTime()+24*s*60*6e4):"week"==e?new Date(t.getTime()+7*s*24*60*6e4):"month"==e?new Date(t.getTime()+30*s*24*60*6e4):void 0},getStorage:function(){return function(){var t=window.sessionStorage;try{return t.setItem("test","1"),t.removeItem("test"),!0}catch(t){return!1}}()?"session"==this.context.resetinterval?window.sessionStorage:window.localStorage:(console.log('Your web browser does not support storing settings locally. In Safari, the most common cause of this is using "Private Browsing Mode". Some settings may not save or some features may not work properly for you.'),{})},initStats:function(){var t=this.getStorage();t[this.context.statsid]&&(this.stats=JSON.parse(t[this.context.statsid])),Mura.isNumeric(this.stats.dismissed)||(this.stats.dismissed=0),Mura.isNumeric(this.stats.visits)||(this.stats.visits=0),Mura.isNumeric(this.stats.displays)||(this.stats.displays=0),"string"==typeof this.stats.expires?(this.stats.expires=new Date(this.stats.expires),this.stats.expires.getTime()<(new Date).getTime()&&(this.stats={visits:0,displays:0,dismissed:0,expires:this.addTime(new Date,this.context.resetinterval,this.context.resetqty)},this.saveStats())):(this.stats.expires=this.addTime(new Date,this.context.resetinterval,this.context.resetqty),this.saveStats())},saveStats:function(){this.getStorage()[this.context.statsid]=JSON.stringify(this.stats)},clearStats:function(){this.stats={visits:0,displays:0,dismissed:0},this.saveStats()},recordVisit:function(){this.stats.visits++,this.saveStats()},recordDisplay:function(){this.stats.displays++,this.saveStats()},display:function(){if(!this.displayed){if(this.displayed=!0,(t=Mura("#mura-cta-"+this.context.instanceid)).length&&t.find(".mura-cta__item__dismiss").trigger("click"),this.recordDisplay(),"inline"===this.context.type)Mura(this.context.targetEl).html(Mura.templates["cta-instance"](this.context));else(i=Mura('.mura-cta__container[data-mura-cta-anchorx="'+this.context.anchorx+'"][data-mura-cta-anchory="'+this.context.anchory+'"]')).length||(Mura(".mura-cta").append(Mura.templates["cta-container"](this.context)),i=Mura('.mura-cta__container[data-mura-cta-anchorx="'+this.context.anchorx+'"][data-mura-cta-anchory="'+this.context.anchory+'"]')),i.addClass("mura-cta__container--"+this.context.type),i.append(Mura.trim(Mura.templates["cta-instance"](this.context)));var t=Mura("#mura-cta-"+this.context.instanceid);if(this.context.instanceclass)for(var e=this.context.instanceclass.split(" "),s=0;s<e.length;s++)t.addClass(e[s]);var a=this,i=Mura(a.context.targetEl).closest(".mura-region-local");t.find(".mura-cta__item__dismiss").on("click",function(){var t=Mura(this).closest(".mura-cta__item"),e=t.closest(".mura-cta__container");t.remove(),a.context.dismissible&&(a.stats.dismissed=1,a.saveStats()),e.length&&!e.find(".mura-cta__item").length&&(e.html("").hide(),setTimeout(function(){e.show()},20)),"inline"==a.context.type&&(i.length&&i.data("perm")?Mura(a.context.targetEl).html('<div class="mura-cta-empty" data-mura-cta-type-label=""></div>'):Mura(a.context.targetEl).html(""));var s=Mura(a.context.targetEl).closest(".mura-object");s.hide(),setTimeout(function(){s.show()},20)});var n=!0;this.context.nestedobject&&"notconfigured"!=this.context.nestedobject&&(t.find('[data-ctaid="'+this.context.instanceid+'"][data-object="'+this.context.nestedobject+'"]').length||t.find(".mura-cta__item__content").appendDisplayObject({object:this.context.nestedobject,ctaid:this.context.instanceid,queue:!1}),n=!1),this.context.componentid&&"notconfigured"!=this.context.componentid&&(t.find('[data-ctaid="'+this.context.instanceid+'"][data-object="component"]').length||t.find(".mura-cta__item__content").appendDisplayObject({object:"component",objectid:this.context.componentid,ctaid:this.context.instanceid,queue:!1}),n=!1),this.context.formid&&"notconfigured"!=this.context.formid&&(t.find('[data-ctaid="'+this.context.instanceid+'"][data-object="form"]').length||t.find(".mura-cta__item__content").appendDisplayObject({object:"form",objectid:this.context.formid,ctaid:this.context.instanceid,queue:!1}),n=!1),n&&t.find(".mura-cta__item__content").html("<p>No content has been assigned.</p>"),setTimeout(function(){console.log("Mura:Render CTA"),t.addClass("mura-cta__item--active")},50),this.context.nestedobject&&"notconfigured"!=this.context.nestedobject&&(Mura.trackEvent({category:"Call to Action",action:"Impression",label:this.context.eventLabel,objectid:this.context.nestedobject,nonInteraction:!0,value:this.stats.displays}),t.on("click","a",function(t){if(a.context.dismissible&&(a.stats.dismissed=1,a.saveStats()),!Mura(this).hasClass("mura-donottrack")){var e=Mura(t.target||t.srcElement);e.attr("target")&&"_self"!=e.attr("target")||t.preventDefault(),Mura.trackEvent({category:"Call to Action",action:"Conversion",label:a.context.eventLabel,objectid:a.context.nestedobject,value:a.stats.displays}).then(function(){e.attr("target")&&"_self"!=e.attr("target")||(window.location=e.attr("href"))})}}),t.on("submit","form",function(t){a.context.dismissible&&(a.stats.dismissed=1,a.saveStats()),Mura(this).hasClass("mura-donottrack")||Mura.trackEvent({category:"Call to Action",action:"Conversion",label:a.context.eventLabel,objectid:a.context.nestedobject,value:a.stats.displays})}),t.on("formSubmit",function(t){a.context.dismissible&&(a.stats.dismissed=1,a.saveStats()),Mura(this).hasClass("mura-donottrack")||Mura.trackEvent({category:"Call to Action",action:"Conversion",label:a.context.eventLabel,objectid:a.context.nestedobject,value:a.stats.displays})})),this.context.componentid&&"notconfigured"!=this.context.componentid&&(Mura.trackEvent({category:"Call to Action",action:"Impression",objectid:this.context.componentid,label:this.context.eventLabel,nonInteraction:!0,value:this.stats.displays}),t.on("click","a",function(t){if(a.context.dismissible&&(a.stats.dismissed=1,a.saveStats()),!Mura(this).hasClass("mura-donottrack")){var e=Mura(t.target||t.srcElement);e.attr("target")&&"_self"!=e.attr("target")||t.preventDefault(),Mura.trackEvent({category:"Call to Action",action:"Conversion",label:a.context.eventLabel,objectid:a.context.componentid,value:a.stats.displays}).then(function(){e.attr("target")&&"_self"!=e.attr("target")||(window.location=e.attr("href"))})}})),this.context.formid&&"notconfigured"!=this.context.formid&&(Mura.trackEvent({category:"Call to Action",action:"Impression",label:a.context.eventLabel,objectid:a.context.formid,nonInteraction:!0,value:a.stats.displays}),t.on("submit","form",function(t){a.context.dismissible&&(a.stats.dismissed=1,a.saveStats()),Mura(this).hasClass("mura-donottrack")||(Mura.trackEvent({category:"Call to Action",action:"Conversion",label:a.context.eventLabel,objectid:a.context.formid,value:a.stats.displays}),a.context.componentid&&"notconfigured"!=a.context.componentid&&Mura.trackEvent({category:"Call to Action",action:"Conversion",label:a.context.eventLabel,objectid:a.context.componentid,value:a.stats.displays}))}),t.on("formSubmit",function(t){a.context.dismissible&&(a.stats.dismissed=1,a.saveStats()),Mura(this).hasClass("mura-donottrack")||(Mura.trackEvent({category:"Call to Action",action:"Conversion",label:a.context.eventLabel,objectid:a.context.formid,value:a.stats.displays}),a.context.componentid&&"notconfigured"!=a.context.componentid&&Mura.trackEvent({category:"Call to Action",action:"Conversion",label:a.context.eventLabel,objectid:a.context.componentid,value:a.stats.displays}))}))}},checkRequirements:function(){(this.preview||this.metDelayRequirement()&&this.metScrollRequirement()&&this.metVisitsRequirement()&&this.metDisplaysRequirement()&&(!this.context.dismissible||!this.stats.dismissed))&&this.display()},metVisitsRequirement:function(){return!this.context.visits||this.stats.visits>=this.context.visits},metDisplaysRequirement:function(){return!this.context.displays||this.context.displays>this.stats.displays},metDelayRequirement:function(){return this.delaymet},metScrollRequirement:function(){return!this.context.scroll||(document.documentElement.scrollTop+document.body.scrollTop)/(document.documentElement.scrollHeight-document.documentElement.clientHeight)*100>=this.context.scroll}});