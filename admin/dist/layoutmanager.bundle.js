!function(t){var e={};function a(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=e,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(r,n,function(e){return t[e]}.bind(null,n));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=308)}({16:function(t,e,a){
/*! mobile-drag-drop 2.3.0-rc.1 | Copyright (c) 2019 Tim Ruffles | MIT License */
!function(t){"use strict";var e="dnd-poly-",a="dnd-poly-",r=a+"dragstart-pending",n=a+"dragstart-cancel",o=["none","copy","copyLink","copyMove","link","linkMove","move","all"],i=["none","copy","move","link"],s=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){}return t}();function d(t){return t&&t.tagName}function u(t,e,a){void 0===a&&(a=!0),document.addEventListener(t,e,!!s&&{passive:a})}function l(t,e){document.removeEventListener(t,e)}function c(t,e,a,r){void 0===r&&(r=!1);var n=s?{passive:!0,capture:r}:r;return t.addEventListener(e,a,n),{off:function(){t.removeEventListener(e,a,n)}}}function h(t){return 0===t.length?0:t.reduce((function(t,e){return e+t}),0)/t.length}function f(t,e){for(var a=0;a<t.changedTouches.length;a++)if(t.changedTouches[a].identifier===e)return!0;return!1}function g(t,e,a){for(var r=[],n=[],o=0;o<e.touches.length;o++){var i=e.touches[o];r.push(i[t+"X"]),n.push(i[t+"Y"])}a.x=h(r),a.y=h(n)}var m=["","-webkit-"];function p(t,e,a,r,n){void 0===n&&(n=!0);var o=e.x,i=e.y;r&&(o+=r.x,i+=r.y),n&&(o-=parseInt(t.offsetWidth,10)/2,i-=parseInt(t.offsetHeight,10)/2);for(var s="translate3d("+o+"px,"+i+"px, 0)",d=0;d<m.length;d++){var u=m[d]+"transform";t.style[u]=s+" "+a[d]}}var v=function(){function t(t,e){this.t=t,this.i=e,this.s=i[0]}return Object.defineProperty(t.prototype,"dropEffect",{get:function(){return this.s},set:function(t){0!==this.t.mode&&o.indexOf(t)>-1&&(this.s=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"types",{get:function(){if(0!==this.t.mode)return Object.freeze(this.t.types)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"effectAllowed",{get:function(){return this.t.effectAllowed},set:function(t){2===this.t.mode&&o.indexOf(t)>-1&&(this.t.effectAllowed=t)},enumerable:!0,configurable:!0}),t.prototype.setData=function(t,e){if(2===this.t.mode){if(t.indexOf(" ")>-1)throw new Error("illegal arg: type contains space");this.t.data[t]=e,-1===this.t.types.indexOf(t)&&this.t.types.push(t)}},t.prototype.getData=function(t){if(1===this.t.mode||2===this.t.mode)return this.t.data[t]||""},t.prototype.clearData=function(t){if(2===this.t.mode){if(t&&this.t.data[t]){delete this.t.data[t];var e=this.t.types.indexOf(t);return void(e>-1&&this.t.types.splice(e,1))}this.t.data={},this.t.types=[]}},t.prototype.setDragImage=function(t,e,a){2===this.t.mode&&this.i(t,e,a)},t}();function b(t,e){return t?t===o[0]?i[0]:0===t.indexOf(o[1])||t===o[7]?i[1]:0===t.indexOf(o[4])?i[3]:t===o[6]?i[2]:i[1]:3===e.nodeType&&"A"===e.tagName?i[3]:i[1]}function y(t,e,a,r,n,o,i){void 0===o&&(o=!0),void 0===i&&(i=null);var s=function(t,e,a,r,n,o,i){void 0===i&&(i=null);var s=e.changedTouches[0],d=new Event(a,{bubbles:!0,cancelable:r});d.dataTransfer=o,d.relatedTarget=i,d.screenX=s.screenX,d.screenY=s.screenY,d.clientX=s.clientX,d.clientY=s.clientY,d.pageX=s.pageX,d.pageY=s.pageY;var u=t.getBoundingClientRect();return d.offsetX=d.clientX-u.left,d.offsetY=d.clientY-u.top,d}(e,a,t,o,document.defaultView,n,i),d=!e.dispatchEvent(s);return r.mode=0,d}function M(t,e){if(!t||t===o[7])return e;if(e===i[1]){if(0===t.indexOf(i[1]))return i[1]}else if(e===i[3]){if(0===t.indexOf(i[3])||t.indexOf("Link")>-1)return i[3]}else if(e===i[2]&&(0===t.indexOf(i[2])||t.indexOf("Move")>-1))return i[2];return i[0]}var j,C=function(){function t(t,e,a,r){this.h=t,this.o=e,this.u=a,this.l=r,this.v=0,this.p=null,this.g=null,this.m=t,this.I=t.changedTouches[0],this.j=this.C.bind(this),this.S=this.k.bind(this),u("touchmove",this.j,!1),u("touchend",this.S,!1),u("touchcancel",this.S,!1)}return t.prototype.A=function(){var t=this;this.v=1,this.O=i[0],this.D={data:{},effectAllowed:void 0,mode:3,types:[]},this.M={x:null,y:null},this.F={x:null,y:null};var e=this.u;if(this.N=new v(this.D,(function(a,r,n){e=a,"number"!=typeof r&&"number"!=typeof n||(t.P={x:r||0,y:n||0})})),this.D.mode=2,this.N.dropEffect=i[0],y("dragstart",this.u,this.m,this.D,this.N))return this.v=3,this.T(),!1;g("page",this.m,this.F);var a,r=this.o.dragImageSetup(e);if(this.L=(a=r,m.map((function(t){var e=a.style[t+"transform"];return e&&"none"!==e?e.replace(/translate\(\D*\d+[^,]*,\D*\d+[^,]*\)\s*/g,""):""}))),r.style.position="absolute",r.style.left="0px",r.style.top="0px",r.style.zIndex="999999",r.classList.add("dnd-poly-drag-image"),r.classList.add("dnd-poly-icon"),this._=r,!this.P)if(this.o.dragImageOffset)this.P={x:this.o.dragImageOffset.x,y:this.o.dragImageOffset.y};else if(this.o.dragImageCenterOnTouch){var n=getComputedStyle(e);this.P={x:0-parseInt(n.marginLeft,10),y:0-parseInt(n.marginTop,10)}}else{var o=e.getBoundingClientRect();n=getComputedStyle(e),this.P={x:o.left-this.I.clientX-parseInt(n.marginLeft,10)+o.width/2,y:o.top-this.I.clientY-parseInt(n.marginTop,10)+o.height/2}}return p(this._,this.F,this.L,this.P,this.o.dragImageCenterOnTouch),document.body.appendChild(this._),this.V=window.setInterval((function(){t.X||(t.X=!0,t.Y(),t.X=!1)}),this.o.iterationInterval),!0},t.prototype.T=function(){this.V&&(clearInterval(this.V),this.V=null),l("touchmove",this.j),l("touchend",this.S),l("touchcancel",this.S),this._&&(this._.parentNode.removeChild(this._),this._=null),this.l(this.o,this.m,this.v)},t.prototype.C=function(t){var e=this;if(!1!==f(t,this.I.identifier)){if(this.m=t,0===this.v){var a=void 0;if(this.o.dragStartConditionOverride)try{a=this.o.dragStartConditionOverride(t)}catch(t){a=!1}else a=1===t.touches.length;return a?void(!0===this.A()&&(this.h.preventDefault(),t.preventDefault())):void this.T()}if(t.preventDefault(),g("client",t,this.M),g("page",t,this.F),this.o.dragImageTranslateOverride)try{var r=!1;if(this.o.dragImageTranslateOverride(t,{x:this.M.x,y:this.M.y},this.p,(function(t,a){e._&&(r=!0,e.M.x+=t,e.M.y+=a,e.F.x+=t,e.F.y+=a,p(e._,e.F,e.L,e.P,e.o.dragImageCenterOnTouch))})),r)return}catch(t){}p(this._,this.F,this.L,this.P,this.o.dragImageCenterOnTouch)}},t.prototype.k=function(t){if(!1!==f(t,this.I.identifier)){if(this.o.dragImageTranslateOverride)try{this.o.dragImageTranslateOverride(void 0,void 0,void 0,(function(){}))}catch(t){}0!==this.v?(t.preventDefault(),this.v="touchcancel"===t.type?3:2):this.T()}},t.prototype.Y=function(){var t=this,a=this.O;this.D.mode=3,this.N.dropEffect=i[0];var r=y("drag",this.u,this.m,this.D,this.N);if(r&&(this.O=i[0]),r||2===this.v||3===this.v)return this.q(this.v)?void function(t,e,a,r){var n=getComputedStyle(t);if("hidden"!==n.visibility&&"none"!==n.display){e.classList.add("dnd-poly-snapback");var o=getComputedStyle(e),i=parseFloat(o.transitionDuration);if(isNaN(i)||0===i)r();else{var s=t.getBoundingClientRect(),d={x:s.left,y:s.top};d.x+=document.body.scrollLeft||document.documentElement.scrollLeft,d.y+=document.body.scrollTop||document.documentElement.scrollTop,d.x-=parseInt(n.marginLeft,10),d.y-=parseInt(n.marginTop,10);var u=parseFloat(o.transitionDelay),l=Math.round(1e3*(i+u));p(e,d,a,void 0,!1),setTimeout(r,l)}}else r()}(this.u,this._,this.L,(function(){t.B()})):void this.B();var n=this.o.elementFromPoint(this.M.x,this.M.y),o=this.g;n!==this.p&&n!==this.g&&(this.p=n,null!==this.g&&(this.D.mode=3,this.N.dropEffect=i[0],y("dragexit",this.g,this.m,this.D,this.N,!1)),null===this.p?this.g=this.p:(this.D.mode=3,this.N.dropEffect=b(this.D.effectAllowed,this.u),y("dragenter",this.p,this.m,this.D,this.N)?(this.g=this.p,this.O=M(this.N.effectAllowed,this.N.dropEffect)):this.p!==document.body&&(this.g=document.body))),o!==this.g&&d(o)&&(this.D.mode=3,this.N.dropEffect=i[0],y("dragleave",o,this.m,this.D,this.N,!1,this.g)),d(this.g)&&(this.D.mode=3,this.N.dropEffect=b(this.D.effectAllowed,this.u),!1===y("dragover",this.g,this.m,this.D,this.N)?this.O=i[0]:this.O=M(this.N.effectAllowed,this.N.dropEffect)),a!==this.O&&this._.classList.remove(e+a);var s=e+this.O;this._.classList.add(s)},t.prototype.q=function(t){var e=this.O===i[0]||null===this.g||3===t;return e?d(this.g)&&(this.D.mode=3,this.N.dropEffect=i[0],y("dragleave",this.g,this.m,this.D,this.N,!1)):d(this.g)&&(this.D.mode=1,this.N.dropEffect=this.O,!0===y("drop",this.g,this.m,this.D,this.N)?this.O=this.N.dropEffect:this.O=i[0]),e},t.prototype.B=function(){this.D.mode=3,this.N.dropEffect=this.O,y("dragend",this.u,this.m,this.D,this.N,!1),this.v=2,this.T()},t}(),D={iterationInterval:150,tryFindDraggableTarget:function(t){var e=t.target;do{if(!1!==e.draggable){if(!0===e.draggable)return e;if(e.getAttribute&&"true"===e.getAttribute("draggable"))return e}}while((e=e.parentNode)&&e!==document.body)},dragImageSetup:function(t){var e=t.cloneNode(!0);return function t(e,a){if(1===e.nodeType){for(var r=getComputedStyle(e),n=0;n<r.length;n++){var o=r[n];a.style.setProperty(o,r.getPropertyValue(o),r.getPropertyPriority(o))}if(a.style.pointerEvents="none",a.removeAttribute("id"),a.removeAttribute("class"),a.removeAttribute("draggable"),"CANVAS"===a.nodeName){var i=e,s=a,d=i.getContext("2d").getImageData(0,0,i.width,i.height);s.getContext("2d").putImageData(d,0,0)}}if(e.hasChildNodes())for(n=0;n<e.childNodes.length;n++)t(e.childNodes[n],a.childNodes[n])}(t,e),e},elementFromPoint:function(t,e){return document.elementFromPoint(t,e)}};function O(t){if(!j){var e=D.tryFindDraggableTarget(t);if(e)try{j=new C(t,D,e,w)}catch(e){throw w(D,t,3),e}}}function E(t){var e=t.target,a=function(t){i.off(),s.off(),d.off(),u.off(),e&&e.dispatchEvent(new CustomEvent(n,{bubbles:!0,cancelable:!0})),clearTimeout(o)};e&&e.dispatchEvent(new CustomEvent(r,{bubbles:!0,cancelable:!0}));var o=window.setTimeout((function(){i.off(),s.off(),d.off(),u.off(),O(t)}),D.holdToDrag),i=c(e,"touchend",a),s=c(e,"touchcancel",a),d=c(e,"touchmove",a),u=c(window,"scroll",a,!0)}function w(t,e,a){if(0===a&&t.defaultActionOverride)try{t.defaultActionOverride(e),e.defaultPrevented}catch(t){}j=null}t.polyfill=function(t){if(t&&Object.keys(t).forEach((function(e){D[e]=t[e]})),!D.forceApply){var e=(a={dragEvents:"ondragstart"in document.documentElement,draggable:"draggable"in document.documentElement,userAgentSupportingNativeDnD:void 0},r=!!window.chrome||/chrome/i.test(navigator.userAgent),a.userAgentSupportingNativeDnD=!(/iPad|iPhone|iPod|Android/.test(navigator.userAgent)||r&&"ontouchstart"in document.documentElement),a);if(e.userAgentSupportingNativeDnD&&e.draggable&&e.dragEvents)return!1}var a,r;return D.holdToDrag?u("touchstart",E,!1):u("touchstart",O,!1),!0},Object.defineProperty(t,"__esModule",{value:!0})}(e)},17:function(t,e,a){!function(t){"use strict";function e(t){return t===document.body||t===document.documentElement}function a(t,a){var r;if(e(t))r=0===a?t.clientLeft:t.clientTop;else{var n=t.getBoundingClientRect();r=0===a?n.left:n.top}return r}function r(t,a){return e(t)?0===a?window.innerWidth:window.innerHeight:0===a?t.clientWidth:t.clientHeight}function n(t,a,r){var n=0===a?"scrollLeft":"scrollTop",o=e(t);if(2===arguments.length)return o?document.body[n]||document.documentElement[n]:t[n];o?(document.documentElement[n]+=r,document.body[n]+=r):t[n]+=r}function o(t){var e=getComputedStyle(t);return t.scrollHeight>t.clientHeight&&("scroll"===e.overflowY||"auto"===e.overflowY)||t.scrollWidth>t.clientWidth&&("scroll"===e.overflowX||"auto"===e.overflowX)}function i(t,e,a){return t<a?-1:e-t<a?1:0}function s(t,e,a,r){return-1===t?Math.abs(e-r):1===t?Math.abs(a-e-r):0}function d(t,e,a){var r=0===t?a.scrollX:a.scrollY;return 1===e?r>=(0===t?a.scrollWidth-a.width:a.scrollHeight-a.height):-1!==e||r<=0}var u,l,c,h,f,g={threshold:75,velocityFn:function(t,e){var a=t/e;return a*a*a*e}},m={horizontal:0,vertical:0},p={x:0,y:0};function v(){u||(u=window.requestAnimationFrame(b))}function b(){var t=0,a=0,r=e(h);0!==m.horizontal&&(t=Math.round(g.velocityFn(p.x,g.threshold)*m.horizontal),n(h,0,t)),0!==m.vertical&&(a=Math.round(g.velocityFn(p.y,g.threshold)*m.vertical),n(h,1,a)),r?f(t,a):f(0,0),u=null,y(l,h,g.threshold,m,p)&&v()}function y(t,e,o,u,l){if(!t||!e)return!1;var c={x:a(e,0),y:a(e,1),width:r(e,0),height:r(e,1),scrollX:n(e,0),scrollY:n(e,1),scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight},h={x:t.x-c.x,y:t.y-c.y};return u.horizontal=i(h.x,c.width,o),u.vertical=i(h.y,c.height,o),u.horizontal&&d(0,u.horizontal,c)?u.horizontal=0:u.horizontal&&(l.x=s(u.horizontal,h.x,c.width,o)),u.vertical&&d(1,u.vertical,c)?u.vertical=0:u.vertical&&(l.y=s(u.vertical,h.y,c.height,o)),!(!u.horizontal&&!u.vertical)}var M=function(t,e,a,r){l=e,f=r,c!==a&&(h=function(t){do{if(!t)return;if(o(t))return t;if(t===document.documentElement)return null}while(t=t.parentNode);return null}(c=a)),y(l,h,g.threshold,m,p)?v():u&&(window.cancelAnimationFrame(u),u=null)};t.scrollBehaviourDragImageTranslateOverride=M,Object.defineProperty(t,"__esModule",{value:!0})}(e)},2:function(t,e,a){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var a=function(t,e){var a=t[1]||"",r=t[3];if(!r)return a;if(e&&"function"==typeof btoa){var n=(i=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),d="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(d," */")),o=r.sources.map((function(t){return"/*# sourceURL=".concat(r.sourceRoot).concat(t," */")}));return[a].concat(o).concat([n]).join("\n")}var i,s,d;return[a].join("\n")}(e,t);return e[2]?"@media ".concat(e[2],"{").concat(a,"}"):a})).join("")},e.i=function(t,a){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},n=0;n<this.length;n++){var o=this[n][0];null!=o&&(r[o]=!0)}for(var i=0;i<t.length;i++){var s=t[i];null!=s[0]&&r[s[0]]||(a&&!s[2]?s[2]=a:a&&(s[2]="(".concat(s[2],") and (").concat(a,")")),e.push(s))}},e}},3:function(t,e,a){"use strict";var r,n={},o=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},i=function(){var t={};return function(e){if(void 0===t[e]){var a=document.querySelector(e);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(t){a=null}t[e]=a}return t[e]}}();function s(t,e){for(var a=[],r={},n=0;n<t.length;n++){var o=t[n],i=e.base?o[0]+e.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[i]?r[i].parts.push(s):a.push(r[i]={id:i,parts:[s]})}return a}function d(t,e){for(var a=0;a<t.length;a++){var r=t[a],o=n[r.id],i=0;if(o){for(o.refs++;i<o.parts.length;i++)o.parts[i](r.parts[i]);for(;i<r.parts.length;i++)o.parts.push(p(r.parts[i],e))}else{for(var s=[];i<r.parts.length;i++)s.push(p(r.parts[i],e));n[r.id]={id:r.id,refs:1,parts:s}}}}function u(t){var e=document.createElement("style");if(void 0===t.attributes.nonce){var r=a.nc;r&&(t.attributes.nonce=r)}if(Object.keys(t.attributes).forEach((function(a){e.setAttribute(a,t.attributes[a])})),"function"==typeof t.insert)t.insert(e);else{var n=i(t.insert||"head");if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(e)}return e}var l,c=(l=[],function(t,e){return l[t]=e,l.filter(Boolean).join("\n")});function h(t,e,a,r){var n=a?"":r.css;if(t.styleSheet)t.styleSheet.cssText=c(e,n);else{var o=document.createTextNode(n),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(o,i[e]):t.appendChild(o)}}function f(t,e,a){var r=a.css,n=a.media,o=a.sourceMap;if(n&&t.setAttribute("media",n),o&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var g=null,m=0;function p(t,e){var a,r,n;if(e.singleton){var o=m++;a=g||(g=u(e)),r=h.bind(null,a,o,!1),n=h.bind(null,a,o,!0)}else a=u(e),r=f.bind(null,a,e),n=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(a)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else n()}}t.exports=function(t,e){(e=e||{}).attributes="object"==typeof e.attributes?e.attributes:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=o());var a=s(t,e);return d(a,e),function(t){for(var r=[],o=0;o<a.length;o++){var i=a[o],u=n[i.id];u&&(u.refs--,r.push(u))}t&&d(s(t,e),e);for(var l=0;l<r.length;l++){var c=r[l];if(0===c.refs){for(var h=0;h<c.parts.length;h++)c.parts[h]();delete n[c.id]}}}}},308:function(t,e,a){"use strict";a.r(e);var r=a(16),n=a(17);a(309),Object(r.polyfill)({dragImageTranslateOverride:n.scrollBehaviourDragImageTranslateOverride}),a(311),a(312)},309:function(t,e,a){var r=a(310);"string"==typeof r&&(r=[[t.i,r,""]]);var n={insert:"head",singleton:!1};a(3)(r,n);r.locals&&(t.exports=r.locals)},310:function(t,e,a){(t.exports=a(2)(!1)).push([t.i,"\n.dnd-poly-drag-image {\n    opacity: .5 !important;\n}\n\n.dnd-poly-drag-image.dnd-poly-snapback {\n    transition-property: transform, -webkit-transform !important;\n    transition-duration: 250ms !important;\n    transition-timing-function: ease-out !important;\n}\n",""])},311:function(t,e){t.exports=Mura},312:function(t,e){var a=function(t,e,a){return Array.prototype.slice.call(t,e,a)};function r(t){t.stopPropagation?t.stopPropagation():window.event&&(window.event.cancelBubble=!0)}function n(t){t.dataTransfer.setData("Text",""),t.dataTransfer.dropEffect="copy",dragEl=this,elDropHandled=!1,newMuraObject=!1,muraLooseDropTarget=null,MuraInlineEditor.sidebarAction("showobjects"),Mura(".mura-object-selected").removeClass("mura-object-selected"),Mura(".mura-region, .mura-region .mura-editable").addClass("mura-region-active"),Mura('.mura-region div[data-object="container"], .mura-region .mura-editable div[data-object="container"]').addClass("mura-container-active"),Mura(this).addClass("mura-object-selected")}function o(){dragEl=null,elDropHandled=!1,newMuraObject=!1,Mura(".mura-object-selected").removeClass("mura-object-selected"),Mura(".mura-region, .mura-region .mura-editable").removeClass("mura-region-active"),Mura('.mura-region div[data-object="container"], .mura-region .mura-editable div[data-object="container"]').removeClass("mura-container-active")}function i(t){if(t.preventDefault(),t.dataTransfer.dropEffect="copy",dragEl||newMuraObject){var e=Mura(".mura-drop-target");muraLooseDropTarget=this,e.length&&(e.removeClass("mura-drop-target").removeClass("mura-append").removeClass("mura-prepend"),e.attr("class")||e.removeAttr("class")),Mura(this).addClass("mura-drop-target").addClass("mura-"+d(t,this))}}function s(t){Mura(this).removeClass("mura-drop-target").removeClass("mura-append").removeClass("mura-prepend"),muraLooseDropTarget=null,Mura(this).attr("class")||Mura(this).removeAttr("class")}function d(t,e){var a=e.getBoundingClientRect(),r=a.top,n=(a.bottom-r)/2+r;return t.clientY>n?"append":"prepend"}function u(t){var e=Mura(".mura-drop-target").node;if(e&&(dragEl||newMuraObject)){if(dragEl&&dragEl!=this){var a=d(t,e);if("container"==e.getAttribute("data-object")){var n=Mura(e).children(".mura-object-content");if(!n.length)return;n.node.childNodes.length?n[a](dragEl):n.append(dragEl)}else"append"==a?e.parentNode.insertBefore(dragEl,e.nextSibling):e.parentNode.insertBefore(dragEl,e);Mura("#adminSave").show(),Mura(e).closest(".mura-region-local").data("dirty",!0),elDropHandled=!0,r(t)}else dragEl==e&&(elDropHandled=!0,r(t));M.call(e,t)}Mura(".mura-drop-target").removeClass("mura-drop-target").removeClass("mura-append").removeClass("mura-prepend"),muraLooseDropTarget=null,newMuraObject=!1,Mura(e).attr("class")||Mura(e).removeAttr("class")}function l(t){Mura(".mura-active-target").removeClass("mura-active-target");Mura(".mura-container-active");var e=Mura(this);if(e.hasClass("mura-object-selected")||Mura(this).addClass("mura-active-target"),"container"==e.data("object"))e.addClass("mura-container-active");else{var a=e.closest('div[data-object="container"]');a.length&&a.addClass("mura-container-active")}}function c(t){var e=Mura(this);e.removeClass("mura-active-target");var a=!0;if(void 0!==Mura.currentObjectInstanceID&&Mura.currentObjectInstanceID)if("container"==e.data("object")&&Mura.currentObjectInstanceID==e.data("instanceid"))a=!1;else{var r=e.closest('div[data-object="container"]');if(r.length)r.find('div[data-instanceid="'+Mura.currentObjectInstanceID+'"]').length&&(a=!1)}a&&e.removeClass("mura-container-active")}function h(t){var e=Mura(t),a=e.parent().closest(".mura-object");if(!a.length||a.length&&"container"==a.data("object")){if("container"==e.data("object"))var r=!0;else;e.off("dragenter",n).off("dragover",i).off("drop",u).off("dragleave",s).on("dragstart",n).on("dragend",o).on("dragover",i).on("dragleave",s).on("drop",u).attr("draggable",!0).hover(l,c,r)}}function f(t,e,a){if(t.closest(".mura-region").length){for(var r=t.parent().closest(".mura-object");r.length&&"container"!=r.data("object");)t=r,r=r.parent().closest(".mura-object");t.length&&t.addClass("mura-drop-target").addClass("mura-"+d(e,a))}}function g(t){if(t.preventDefault(),t.dataTransfer.dropEffect="copy",!Mura(".mura-drop-target").length&&(dragEl||newMuraObject)){var e=Mura(this).closest(".mura-object");e.length?f(e,t,this):Mura(this).addClass("mura-drop-target").addClass("mura-"+d(t,this))}}function m(t){if(t.preventDefault(),dragEl||newMuraObject){var e=Mura(".mura-drop-target");muraLooseDropTarget=this,e.length&&(e.removeClass("mura-drop-target").removeClass("mura-append").removeClass("mura-prepend"),e.attr("class")||e.removeAttr("class"));var a=Mura(this).closest(".mura-object");a.length?f(a,t,this):(a=Mura(this).closest(".mura-object")).length?a.addClass("mura-drop-target").addClass("mura-"+d(t,this)):Mura(this).addClass("mura-drop-target").addClass("mura-"+d(t,this))}}function p(t){Mura(this).removeClass("mura-drop-target").removeClass("mura-append").removeClass("mura-prepend"),muraLooseDropTarget=null,Mura(this).attr("class")||Mura(this).removeAttr("class")}function v(t){if(r(t),dragEl||newMuraObject){var e=Mura(".mura-drop-target").node;if(e){if(dragEl&&dragEl!=e){var a=d(t,e);if("container"==e.getAttribute("data-object")){var n=Mura(e).children(".mura-object-content");n.node.childNodes.length?n[a](dragEl):n.append(dragEl)}else try{"append"==a?e.parentNode.insertBefore(dragEl,e.nextSibling):e.parentNode.insertBefore(dragEl,e)}catch(t){}var o=Mura(dragEl);Mura("#adminSave").show(),o.addClass("mura-async-object"),"text"==o.data("object")&&"client"==o.data("render")&&"false"==o.data("async")||o.data("async",!0),Mura(e).closest(".mura-region-local").data("dirty",!0),Mura(e).hasClass("mura-object")?h(e):b(this),elDropHandled=!0,r(t)}else dragEl==e&&(elDropHandled=!0,r(t));M.call(e,t)}}Mura(".mura-drop-target").removeClass("mura-drop-target").removeClass("mura-append").removeClass("mura-prepend"),muraLooseDropTarget=null,newMuraObject=!1,Mura(this).attr("class")||Mura(this).removeAttr("class")}function b(t){Mura(t).off("dragenter",g).off("dragover",m).off("drop",v).off("dragleave",p).on("dragenter",g).on("dragover",m).on("dragleave",p).on("drop",v)}function y(){Mura(".mura-objectclass").each((function(){var t=Mura(this);t.data("inited")||(t.attr("draggable",!0),t.on("dragstart",(function(e){dragEl=null,elDropHandled=!1,newMuraObject=!0,muraLooseDropTarget=null,Mura("#dragtype").html(t.data("object")),Mura(".mura-sidebar").addClass("mura-sidebar--dragging"),Mura(".mura-region, .mura-region .mura-editable").addClass("mura-region-active"),Mura('.mura-region div[data-object="container"], .mura-region .mura-editable div[data-object="container"]').addClass("mura-container-active"),e.dataTransfer.setData("text",JSON.stringify({object:t.data("object"),objectname:t.data("objectname"),objectid:t.data("objectid"),objecticonclass:t.data("objecticonclass")}))})).on("dragend",(function(){if(Mura("#dragtype").html(""),dragEl=null,elDropHandled=!1,newMuraObject=!1,Mura(".mura-sidebar").removeClass("mura-sidebar--dragging"),Mura(".mura-region, .mura-region .mura-editable").removeClass("mura-region-active"),Mura('.mura-region div[data-object="container"], .mura-region .mura-editable div[data-object="container"]').removeClass("mura-container-active"),void 0!==Mura.currentObjectInstanceID&&Mura.currentObjectInstanceID){var t=Mura('div[data-instanceid="'+Mura.currentObjectInstanceID+'"]');if("container"==t.data("object")&&t.addClass("mura-container-active"),container=t.closest('div[data-object="container"]'),container.length)container.find('div[data-instanceid="'+Mura.currentObjectInstanceID+'"]').length&&container.addClass("mura-container-active")}})),t.data("inited",!0))}))}function M(t){t.preventDefault(),t.stopPropagation&&t.stopPropagation();var e=t.dataTransfer.getData("text");if(""!=e)try{e=JSON.parse(e)}catch(t){e=""}if("object"==typeof e&&e.object){var a=document.createElement("DIV");a.setAttribute("data-object",e.object),a.setAttribute("data-objectname",e.objectname),a.setAttribute("data-objecticonclass",e.objecticonclass),a.setAttribute("data-async",!0),a.setAttribute("data-perm","author"),a.setAttribute("data-instanceid",Mura.createUUID()),a.setAttribute("class","mura-async-object mura-object mura-active"),e.objectid?a.setAttribute("data-objectid",e.objectid):a.setAttribute("data-objectid",Mura.createUUID());var n=Mura(this),o=d(t,this);if(n.hasClass("mura-object"))if("container"==this.getAttribute("data-object")){var i=n.children(".mura-object-content");i.node.childNodes.length?i[o](a):i.append(a)}else"append"==o?this.parentNode.insertBefore(a,this.nextSibling):this.parentNode.insertBefore(a,this);else n.hasClass("mura-region-local")?this.appendChild(a):"append"==o?this.parentNode.insertBefore(a,this.nextSibling):this.parentNode.insertBefore(a,this);h(a),Mura.processAsyncObject(a),a=Mura(a),openFrontEndToolsModal(a.node,!0),a.on("click",Mura.handleObjectClick),a.closest(".mura-region-local").data("dirty",!0),a.on("dragover",(function(){})),Mura("#adminSave").show(),r(t)}}function j(t){t.preventDefault(),t.dataTransfer.dropEffect="copy"}function C(t){var e,n,o;if(t.preventDefault(),!Mura(this).find(".mura-object").length)return t.stopPropagation&&t.stopPropagation(),dragEl&&dragEl!==this?(e=this.parentNode,o=a(dragEl.parentNode.children).indexOf(dragEl),n=a(this.parentNode.children).indexOf(this),this.parentNode===dragEl.parentNode&&n>o?e.insertBefore(dragEl,this.nextSibling):this.appendChild(dragEl),Mura("#adminSave").show(),Mura(dragEl).data("async",!0),Mura(dragEl).addClass("mura-async-object"),Mura(this).data("dirty",!0),elDropHandled=!0,r(t)):dragEl==this&&(elDropHandled=!0,r(t)),M.call(this,t),muraLooseDropTarget=null,Mura(".mura-drop-target").removeClass("mura-drop-target").removeClass("mura-append").removeClass("mura-prepend"),!0}Mura.initLayoutManager=function(t){if(t){var e=t.node?t:Mura(t);t=t.node||t}else{t=(e=Mura("body")).node,y(),Mura("body").removeClass("mura-sidebar-state__hidden--right").removeClass("mura-editing").addClass("mura-sidebar-state__pushed--right").addClass("mura-editing")}Mura("#frontEndToolsSidebariframe"),e.find(".mxp-editable").each((function(){var t=Mura(this);t.hasClass("mura-region-local")||(t.addClass("mura-region-local"),t.data("inited",!1),t.data("loose",!0),t.data("perm","editor"))})),e.find('.mura-region-local[data-inited="false"]').each((function(){var t=Mura(this);(!t.data("loose")||t.data("loose")&&"<p></p>"==t.html()||""==Mura.trim(t.html()))&&t.on("drop",C).on("dragover",j).data("inited","true")})),e.find(".mura-region-local .mura-object").each((function(){h(this)})),e.find('.mura-region-local .mura-object[data-object="container"], .mura-region-local div, .mura-region-local[data-loose="true"] p, .mura-region-local[data-loose="true"] h1, .mura-region-local[data-loose="true"] h2, .mura-region-local[data-loose="true"] h3, .mura-region-local[data-loose="true"] h4, .mura-region-local[data-loose="true"] img, .mura-region-local[data-loose="true"] table, .mura-region-local[data-loose="true"] article, .mura-region-local[data-loose="true"] dl').each((function(){b(this)})),e.find("div.mura-object[data-targetattr]").hover(l,c)},Mura.deInitLayoutManager=function(){Mura.editing=!1,Mura("body").removeClass("mura-editing"),Mura("body").removeClass("mura-sidebar-state__pushed--right"),Mura(".mura-region-local .mura-object").each((function(){Mura(this).off("dragenter",n).off("dragover",i).off("drop",u).off("dragleave",s).off("dragstart",n).off("dragend",o).off("mouseover",l).off("mouseout",c).off("touchstart",l).off("touchend",c).attr("draggable",!1).removeClass("mura-active").removeClass("mura-object-selected").removeClass("mura-object-select").removeClass("mura-active-target")})),Mura(".mura-region-local").off("drop",C).off("dragover",j).data("inited","false"),Mura('.mura-region-local .mura-object[data-object="container"], .mura-region-local div, .mura-region-local[data-loose="true"] p, .mura-region-local[data-loose="true"] h1, .mura-region-local[data-loose="true"] h2, .mura-region-local[data-loose="true"] h3, .mura-region-local[data-loose="true"] h4, .mura-region-local[data-loose="true"] img, .mura-region-local[data-loose="true"] table, .mura-region-local[data-loose="true"] article, .mura-region-local[data-loose="true"] dl').off("dragenter",g).off("dragover",m).off("drop",v).off("dragleave",p),Mura(".mura-editable-attribute").each((function(){var t=Mura(this);if("undefined"!=typeof CKEDITOR&&CKEDITOR.instances[t.attr("id")]){var e=CKEDITOR.instances[t.attr("id")];e.updateElement(),e.destroy(!0)}t.attr("contenteditable","false"),t.removeClass("mura-active"),t.data("manualedit",!1),t.off("dblclick")}))},Mura.loadObjectClass=function(t,e,a,r,n,o){var i="muraAction=cArch.loadclass&compactDisplay=true&layoutmanager=true&siteid="+t+"&classid="+e+"&subclassid="+a+"&contentid="+r+"&parentid="+n+"&cacheid="+Math.random();if("plugins"==e)var s=Mura("#pluginList");else{s=Mura("#classList");Mura("#classListContainer").show()}return s.html(Mura.preloaderMarkup),Mura.ajax({url:Mura.adminpath+"?"+i,success:function(t){s.html(t),y()}}),!1},Mura.initLooseDropTarget=b,Mura.initDraggableObject=h,Mura.initDraggableObject_hoverin=l,Mura.initDraggableObject_hoverout=c}});